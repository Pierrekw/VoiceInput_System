audio:
  # é’ˆå¯¹torch 2.3.1+cpuç‰ˆæœ¬ä¼˜åŒ–çš„éŸ³é¢‘é…ç½®
  chunk_size: 200  # å‡å°chunk_sizeä»¥é™ä½CPUå¤„ç†è´Ÿæ‹…
  sample_rate: 16000

  # FFmpegéŸ³é¢‘é¢„å¤„ç† (é»˜è®¤å…³é—­)
  # å¯ç”¨åå¯æ˜¾è‘—æå‡è¯­éŸ³è´¨é‡ï¼Œå¢å¼ºVADå’ŒASRè¯†åˆ«å‡†ç¡®æ€§
  ffmpeg_preprocessing:
    enabled: true  # æµ‹è¯•é˜¶æ®µå¯ç”¨

    # FFmpegæ»¤é•œé“¾å‚æ•° (å¯è‡ªå®šä¹‰)
    # highpass=f=80: ç§»é™¤ä½é¢‘å™ªéŸ³(å¦‚ç©ºè°ƒå£°ã€æ‰‹æŸ„å™ªéŸ³)
    # afftdn=nf=-25: åŸºäºFFTçš„é™å™ªï¼Œå‡å°‘ç¨³å®šèƒŒæ™¯å™ªéŸ³
    # loudnorm: éŸ³é‡æ ‡å‡†åŒ–ï¼Œæå‡è¯­éŸ³æ¸…æ™°åº¦
    # volume=2.0: éŸ³é‡å¢å¼ºï¼Œæé«˜ä¿¡å™ªæ¯”
    filter_chain: "highpass=f=80, afftdn=nf=-25, loudnorm, volume=2.0"

    # é¢„å¤„ç†é€‰é¡¹
    options:
      # æ˜¯å¦åœ¨è¯­éŸ³å¼€å§‹æ—¶è¿›è¡Œé¢„å¤„ç†
      process_input: true

      # æ˜¯å¦ä¿å­˜é¢„å¤„ç†åçš„éŸ³é¢‘æ–‡ä»¶(è°ƒè¯•ç”¨)
      save_processed: false

      # é¢„å¤„ç†åçš„ä¸´æ—¶æ–‡ä»¶åå‰ç¼€
      processed_prefix: "processed_"
error_correction:
  dictionary_path: voice_correction_dict.txt
  enabled: true
excel:
  auto_export: true
  file_name: report
  template_path: reports/templates/enhanced_measure_template.xlsx
  output_directory: reports
  file_naming_pattern: Report_{part_no}_{batch_no}_{timestamp}

  # Excelæ¨¡æ¿å’Œæ ¼å¼é…ç½®
  template:
    enabled: true
    header_row: 3  # æ¨¡æ¿æ ‡é¢˜åœ¨ç¬¬3è¡Œ
    data_start_row: 5  # æ•°æ®ä»ç¬¬5è¡Œå¼€å§‹ï¼ˆè·³è¿‡ç¤ºä¾‹æ•°æ®ï¼‰
    skip_existing_data: true  # è·³è¿‡æ¨¡æ¿ä¸­çš„ç°æœ‰æ•°æ®ï¼Œä»æ–°è¡Œå¼€å§‹å†™å…¥

  formatting:
    auto_numbering: true
    header_language: zh
    include_original: true
    include_timestamp: true
    cell_alignment: center  # å•å…ƒæ ¼å±…ä¸­å¯¹é½

  # åŒIDç³»ç»Ÿé…ç½®
  id_system:
    voice_id_column: G  # è¯­éŸ³å½•å…¥IDåœ¨Gåˆ—
    excel_id_column: C   # Excelç¼–å·åœ¨Cåˆ—
    standard_id_column: A  # æ ‡å‡†åºå·åœ¨Aåˆ—

  # è¾“å…¥éªŒè¯é…ç½®
  input_validation:
    part_no:
      min_length: 3
      max_length: 20
      required: true
      pattern: "^[A-Za-z0-9_-]+$"
    batch_no:
      min_length: 3
      max_length: 15
      required: true
      pattern: "^[A-Za-z0-9_-]+$"
    inspector:
      min_length: 2
      max_length: 10
      required: true
      pattern: "^[\u4e00-\u9fa5Â·]+$"  # åªå…è®¸ä¸­æ–‡å­—ç¬¦å’Œé—´éš”å·

  # æ€§èƒ½ä¼˜åŒ–é…ç½®
  performance:
    memory_row_management: true  # å¯ç”¨å†…å­˜è¡Œå·ç®¡ç†
    batch_size: 50  # æ‰¹é‡å†™å…¥å¤§å°
model:
  default_path: ./model/cn
  device: cpu
  funasr:
    # é’ˆå¯¹torch 2.3.1+cpuç‰ˆæœ¬è¿›ä¸€æ­¥ä¼˜åŒ–çš„FunASRé…ç½®
    # ä½¿ç”¨æ›´æ¿€è¿›çš„chunk_sizeä»¥æé«˜è¯†åˆ«å“åº”é€Ÿåº¦
    chunk_size:
    - 0
    - 6   # è¿›ä¸€æ­¥é™ä½chunk_sizeä»¥æé«˜å“åº”é€Ÿåº¦
    - 3   # ç›¸åº”è°ƒæ•´strideä»¥ä¿æŒè¿ç»­æ€§
    decoder_chunk_look_back: 1
    disable_update: true
    encoder_chunk_look_back: 1  # è¿›ä¸€æ­¥å‡å°‘å†…å­˜ä½¿ç”¨
    path: ./model/fun
    trust_remote_code: false
recognition:
  buffer_size: 10000
  pause_timeout_multiplier: 3
  timeout_seconds: -1
  # ğŸ”§ æ•°å­—è¯†åˆ«ä¼˜åŒ–é…ç½®
  # å¢åŠ ç¼“å†²åŒºå¤§å°ä»¥æ”¯æŒæ›´é•¿çš„æ•°å­—åºåˆ—è¯†åˆ«
  decimal_optimization:
    enabled: true
    # å»¶é•¿éŸ³é¢‘é‡‡é›†æ—¶é—´ï¼Œç¡®ä¿å®Œæ•´çš„å°æ•°è¢«è¯†åˆ«
    extended_capture_time: 2.0
    # æé«˜æ•°å­—è¯†åˆ«çš„ç½®ä¿¡åº¦é˜ˆå€¼
    confidence_threshold: 0.7
special_texts:
  enabled: true
  exportable_texts:
  - base_text: OK
    variants:
    - OK
    - ok
    - Okay
    - okay 
    - åˆæ ¼
    - é€šè¿‡
  - base_text: NOK
    variants:
    - NotOK
    - notok
    - noteok
    - NoteOK
    - NG
    - ä¸åˆæ ¼
    - ä¸OK
    - ä¸é€šè¿‡ 
system:
  global_unload: false
  log_level: INFO
  test_mode: false
  vosk_log_level: 0
# ===== VADè¯­éŸ³æ´»åŠ¨æ£€æµ‹é…ç½® =====
# VAD (Voice Activity Detection) è´Ÿè´£æ£€æµ‹è¯­éŸ³çš„å¼€å§‹å’Œç»“æŸ
# ğŸ”‘ min_silence_duration æ˜¯å½±å“å»¶è¿Ÿçš„å…³é”®å‚æ•°ï¼

vad:
  # VADæ¨¡å¼é€‰æ‹© - å¯é€‰å€¼: "fast", "balanced", "accuracy", "customized"
  # fast: å¿«é€Ÿå“åº”æ¨¡å¼ - å‡å°‘å»¶è¿Ÿä½†å¯èƒ½è¯¯æ£€æµ‹ (æ¨èæ—¥å¸¸ä½¿ç”¨)
  # balanced: å¹³è¡¡æ¨¡å¼ - é»˜è®¤è®¾ç½®
  # accuracy: é«˜å‡†ç¡®æ€§æ¨¡å¼ - å¢åŠ ç¨³å®šæ€§ä½†å»¶è¿Ÿè¾ƒé«˜
  # customized: è‡ªå®šä¹‰æ¨¡å¼ - ä½¿ç”¨ä¸‹é¢çš„å…·ä½“å‚æ•°è®¾ç½®
  # é’ˆå¯¹torch 2.3.1+cpuç‰ˆæœ¬ä¼˜åŒ–ï¼Œä½¿ç”¨è‡ªå®šä¹‰å¹³è¡¡é…ç½®
  mode: "customized"

  # ===== è‡ªå®šä¹‰VADå‚æ•° (ä»…åœ¨mode="customized"æ—¶ç”Ÿæ•ˆ) =====
  # é’ˆå¯¹torch 2.3.1+cpuç‰ˆæœ¬ä¼˜åŒ–çš„VADå‚æ•°
  # åœ¨accuracyå’Œbalancedä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹

  # èƒ½é‡é˜ˆå€¼ - æ£€æµ‹è¯­éŸ³çš„æœ€å°èƒ½é‡
  # ä¼˜åŒ–ï¼šé™ä½é˜ˆå€¼ä»¥æ›´å¥½åœ°æ£€æµ‹è½»å£°æ•°å­—
  energy_threshold: 0.010

  # GUIèƒ½é‡æ˜¾ç¤ºé˜ˆå€¼ - ç”¨äºèƒ½é‡æ¡æ˜¾ç¤ºçš„æœ€å°èƒ½é‡ï¼ˆç‹¬ç«‹äºVADæ£€æµ‹ï¼‰
  # è¾ƒä½çš„å€¼ä½¿èƒ½é‡æ¡æ›´æ•æ„Ÿï¼Œä½†ä¸å½±å“è¯­éŸ³è¯†åˆ«å‡†ç¡®æ€§ï¼Œ æ¯”å¦‚0.00001
  gui_display_threshold: 0.01

  # æœ€å°è¯­éŸ³æŒç»­æ—¶é—´ - æ£€æµ‹åˆ°è¯­éŸ³åè‡³å°‘æŒç»­å¤šä¹…æ‰è®¤ä¸ºæ˜¯æœ‰æ•ˆè¯­éŸ³
  # ä¼˜åŒ–ï¼šé™ä½ä»¥æé«˜é¦–æ¬¡å“åº”é€Ÿåº¦
  min_speech_duration: 0.2

  # æœ€å°é™éŸ³æŒç»­æ—¶é—´ - è¯­éŸ³ç»“æŸåéœ€è¦é™éŸ³å¤šä¹…æ‰è®¤ä¸ºè¯´è¯ç»“æŸ
  # ğŸ”§ ä¼˜åŒ–ï¼šé€‚åº¦å‡å°‘ä»¥æé«˜é¦–æ¬¡å“åº”é€Ÿåº¦ï¼Œä½†ä¿æŒå¯¹å°æ•°è¯†åˆ«çš„æ”¯æŒ
  # å¹³è¡¡é¦–æ¬¡å“åº”é€Ÿåº¦å’Œè¯†åˆ«å‡†ç¡®æ€§
  min_silence_duration: 0.8

  # è¯­éŸ³å¡«å…… - åœ¨è¯­éŸ³å‰åæ·»åŠ é¢å¤–çš„éŸ³é¢‘æ—¶é—´
  # ä¼˜åŒ–ï¼šè°ƒæ•´ä¸ºæ›´å¹³è¡¡çš„å€¼ï¼Œä¿æŒè¯†åˆ«å®Œæ•´æ€§åŒæ—¶æé«˜å“åº”é€Ÿåº¦
  speech_padding: 0.3

  # ===== VADé¢„è®¾é…ç½®å®šä¹‰ (ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼Œè¯·å‹¿ä¿®æ”¹) =====
  presets:
    fast:
      # ğŸš€ å¿«é€Ÿå“åº”æ¨¡å¼ - é€‚åˆæ—¥å¸¸ä½¿ç”¨
      # é¢„ä¼°å»¶è¿Ÿ: 0.35ç§’ (ä¸å«è¯´è¯æ—¶é—´)
      energy_threshold: 0.01
      min_speech_duration: 0.1
      min_silence_duration: 0.2
      speech_padding: 0.2
      description: "å¿«é€Ÿå“åº”æ¨¡å¼ - å‡å°‘å»¶è¿Ÿä½†å¯èƒ½è¯¯æ£€æµ‹"
      use_case: "æ—¥å¸¸äº¤æµï¼Œè¿½æ±‚é€Ÿåº¦"

    balanced:
      # âš–ï¸ å¹³è¡¡æ¨¡å¼ - é»˜è®¤æ¨è
      # é¢„ä¼°å»¶è¿Ÿ: 0.75ç§’ (ä¸å«è¯´è¯æ—¶é—´)
      energy_threshold: 0.015
      min_speech_duration: 0.3
      min_silence_duration: 0.6
      speech_padding: 0.3
      description: "å¹³è¡¡æ¨¡å¼ - é»˜è®¤è®¾ç½®"
      use_case: "å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯çš„æ¨èé€‰æ‹©"

    accuracy:
      # ğŸ¯ é«˜å‡†ç¡®æ€§æ¨¡å¼ - é€‚åˆé‡è¦åœºåˆ
      # é¢„ä¼°å»¶è¿Ÿ: 1.15ç§’ (ä¸å«è¯´è¯æ—¶é—´)
      energy_threshold: 0.02
      min_speech_duration: 0.5
      min_silence_duration: 1.0
      speech_padding: 0.4
      description: "é«˜å‡†ç¡®æ€§æ¨¡å¼ - å¢åŠ ç¨³å®šæ€§ä½†å»¶è¿Ÿè¾ƒé«˜"
      use_case: "é‡è¦ä¼šè®®ï¼Œæ­£å¼åœºåˆ"

  # ===== ä½¿ç”¨è¯´æ˜ =====
  # 1. å¿«é€Ÿåˆ‡æ¢æ¨¡å¼ï¼š
  #    ä¿®æ”¹ mode å­—æ®µä¸º "fast", "balanced", "accuracy" ä¹‹ä¸€
  #
  # 2. è‡ªå®šä¹‰é…ç½®ï¼š
  #    è®¾ç½® mode: "customized"ï¼Œç„¶åè°ƒæ•´ä¸‹é¢çš„å‚æ•°
  #
  # 3. å»¶è¿Ÿä¼°ç®—ï¼š
  #    æ€»å»¶è¿Ÿ = è¯´è¯æ—¶é—´ + min_silence_duration + ASRå¤„ç†æ—¶é—´(~0.15s)
  #
  # 4. æ¨èé…ç½®ï¼š
  #    â€¢ æ—¥å¸¸ä½¿ç”¨: mode: "fast"
  #    â€¢ åŠå…¬ç¯å¢ƒ: mode: "balanced"
  #    â€¢ é‡è¦åœºåˆ: mode: "accuracy"
  #    â€¢ ç‰¹æ®Šéœ€æ±‚: mode: "customized" + æ‰‹åŠ¨è°ƒæ•´å‚æ•°
  #
  # 5. æ•…éšœæ’é™¤ï¼š
  #    â€¢ è¯†åˆ«ç»å¸¸ä¸­æ–­: å¢åŠ  min_silence_duration åˆ° 0.8+
  #    â€¢ å“åº”å¤ªæ…¢: å‡å°‘ min_silence_duration åˆ° 0.2-
  #    â€¢ è¯¯æ£€æµ‹å™ªéŸ³: å¢åŠ  energy_threshold åˆ° 0.02+
  #    â€¢ æ¼æ‰è½»å£°: å‡å°‘ energy_threshold åˆ° 0.01-
voice_commands:
  config:
    confidence_threshold: 0.8
    match_mode: fuzzy
    min_match_length: 2
  pause_commands:
  - æš‚åœ
  - æš‚åœå½•éŸ³
  - æš‚åœè¯†åˆ«
  - pause
  - æš‚åœä¸€ä¸‹
  - ç­‰ä¸€ä¸‹
  resume_commands:
  - ç»§ç»­
  - ç»§ç»­å½•éŸ³
  - æ¢å¤
  - æ¢å¤è¯†åˆ«
  - resume
  - ç»§ç»­è¯†åˆ«
  - å¼€å§‹
  stop_commands:
  - åœæ­¢
  - åœæ­¢å½•éŸ³
  - ç»“æŸ
  - exit
  - stop
  - åœæ­¢è¯†åˆ«
  - ç»“æŸè¯†åˆ«
  - é€€å‡º
  standard_id_commands:
    # ç®€åŒ–çš„æ ‡å‡†åºå·å‘½ä»¤é…ç½® - ä½¿ç”¨æ¨¡å¼åŒ¹é…
    # ç³»ç»Ÿå°†è‡ªåŠ¨è¯†åˆ«è¿™äº›å‰ç¼€ + ä»»æ„100çš„å€æ•°çš„æ•°å­—
    prefixes:
      - è®¾ç½®æ ‡å‡†åºå·
      - è®¾ç½®åºå·
      - åˆ‡æ¢åºå·
      - åˆ‡æ¢åˆ°
      - åºå·
      - åˆ‡æ¢
      - è®¾ç½®
