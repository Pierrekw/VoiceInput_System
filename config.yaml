audio:
  # 针对torch 2.3.1+cpu版本优化的音频配置
  chunk_size: 200  # 减小chunk_size以降低CPU处理负担
  sample_rate: 16000
error_correction:
  dictionary_path: voice_correction_dict.txt
  enabled: true
excel:
  auto_export: true
  file_name: report
  formatting:
    auto_numbering: true
    header_language: zh
    include_original: true
    include_timestamp: true
model:
  default_path: ./model/cn
  device: cpu
  funasr:
    # 针对torch 2.3.1+cpu版本进一步优化的FunASR配置
    # 使用更激进的chunk_size以提高识别响应速度
    chunk_size:
    - 0
    - 6   # 进一步降低chunk_size以提高响应速度
    - 3   # 相应调整stride以保持连续性
    decoder_chunk_look_back: 1
    disable_update: true
    encoder_chunk_look_back: 1  # 进一步减少内存使用
    path: ./model/fun
    trust_remote_code: false
recognition:
  buffer_size: 10000
  pause_timeout_multiplier: 3
  timeout_seconds: -1
special_texts:
  enabled: true
  exportable_texts:
  - base_text: OK
    variants:
    - OK
    - ok
    - Okay
    - okay 
    - 合格
    - 通过
  - base_text: NOT OK
    variants:
    - NotOK
    - notok
    - noteok
    - NoteOK
    - NG
    - 不合格
    - 不OK
    - 不通过 
system:
  global_unload: false
  log_level: INFO
  test_mode: false
  vosk_log_level: 0
# ===== VAD语音活动检测配置 =====
# VAD (Voice Activity Detection) 负责检测语音的开始和结束
# 🔑 min_silence_duration 是影响延迟的关键参数！

vad:
  # VAD模式选择 - 可选值: "fast", "balanced", "accuracy", "customized"
  # fast: 快速响应模式 - 减少延迟但可能误检测 (推荐日常使用)
  # balanced: 平衡模式 - 默认设置
  # accuracy: 高准确性模式 - 增加稳定性但延迟较高
  # customized: 自定义模式 - 使用下面的具体参数设置
  # 针对torch 2.3.1+cpu版本优化，使用自定义平衡配置
  mode: "customized"

  # ===== 自定义VAD参数 (仅在mode="customized"时生效) =====
  # 针对torch 2.3.1+cpu版本优化的VAD参数
  # 在accuracy和balanced之间找到最佳平衡点

  # 能量阈值 - 检测语音的最小能量
  # torch 2.3.1+cpu优化：稍低的阈值以提高敏感度
  energy_threshold: 0.012

  # 最小语音持续时间 - 检测到语音后至少持续多久才认为是有效语音
  # torch 2.3.1+cpu优化：平衡响应速度和稳定性
  min_speech_duration: 0.2

  # 最小静音持续时间 - 语音结束后需要静音多久才认为说话结束
  # torch 2.3.1+cpu优化：增加静音检测时间以避免重复识别
  min_silence_duration: 0.8

  # 语音填充 - 在语音前后添加额外的音频时间
  # torch 2.3.1+cpu优化：增加填充以补偿识别延迟
  speech_padding: 0.4

  # ===== VAD预设配置定义 (系统内部使用，请勿修改) =====
  presets:
    fast:
      # 🚀 快速响应模式 - 适合日常使用
      # 预估延迟: 0.35秒 (不含说话时间)
      energy_threshold: 0.01
      min_speech_duration: 0.1
      min_silence_duration: 0.2
      speech_padding: 0.2
      description: "快速响应模式 - 减少延迟但可能误检测"
      use_case: "日常交流，追求速度"

    balanced:
      # ⚖️ 平衡模式 - 默认推荐
      # 预估延迟: 0.75秒 (不含说话时间)
      energy_threshold: 0.015
      min_speech_duration: 0.3
      min_silence_duration: 0.6
      speech_padding: 0.3
      description: "平衡模式 - 默认设置"
      use_case: "大多数使用场景的推荐选择"

    accuracy:
      # 🎯 高准确性模式 - 适合重要场合
      # 预估延迟: 1.15秒 (不含说话时间)
      energy_threshold: 0.02
      min_speech_duration: 0.5
      min_silence_duration: 1.0
      speech_padding: 0.4
      description: "高准确性模式 - 增加稳定性但延迟较高"
      use_case: "重要会议，正式场合"

  # ===== 使用说明 =====
  # 1. 快速切换模式：
  #    修改 mode 字段为 "fast", "balanced", "accuracy" 之一
  #
  # 2. 自定义配置：
  #    设置 mode: "customized"，然后调整下面的参数
  #
  # 3. 延迟估算：
  #    总延迟 = 说话时间 + min_silence_duration + ASR处理时间(~0.15s)
  #
  # 4. 推荐配置：
  #    • 日常使用: mode: "fast"
  #    • 办公环境: mode: "balanced"
  #    • 重要场合: mode: "accuracy"
  #    • 特殊需求: mode: "customized" + 手动调整参数
  #
  # 5. 故障排除：
  #    • 识别经常中断: 增加 min_silence_duration 到 0.8+
  #    • 响应太慢: 减少 min_silence_duration 到 0.2-
  #    • 误检测噪音: 增加 energy_threshold 到 0.02+
  #    • 漏掉轻声: 减少 energy_threshold 到 0.01-
voice_commands:
  config:
    confidence_threshold: 0.8
    match_mode: fuzzy
    min_match_length: 2
  pause_commands:
  - 暂停
  - 暂停录音
  - 暂停识别
  - pause
  - 暂停一下
  - 等一下
  resume_commands:
  - 继续
  - 继续录音
  - 恢复
  - 恢复识别
  - resume
  - 继续识别
  - 开始
  stop_commands:
  - 停止
  - 停止录音
  - 结束
  - exit
  - stop
  - 停止识别
  - 结束识别
  - 退出
